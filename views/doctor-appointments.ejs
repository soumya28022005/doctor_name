<%- include('partials/header.ejs') %>

<div class="card">
    <h2>Appointments for Dr. <%= doctor.name %> (<%= doctor.specialty %>)</h2>
    <p>Clinic: <%= clinic.name %> - <%= clinic.address %></p>

    <% if(appointments.length > 0) { %>
        <ol>
            <% appointments.forEach(app => { %>
                <li>
                    <strong>Patient:</strong> <%= app.patient_name %><br>
                    <strong>Date:</strong> <%= new Date(app.date).toLocaleDateString() %> at <%= app.time %><br>
                    <strong>Status:</strong> 
                    <span class="<%= app.status === 'Confirmed' ? 'text-green-600' : 'text-red-600' %>">
                       <%= app.status %>
                    </span>
                </li>
            <% }) %>
        </ol>
    <% } else { %>
        <p>No appointments found for this doctor in this clinic.</p>
  <% } %>
</div>

<hr>

<h3>Add New Walk-in Patient</h3>
<form action="/receptionist/add-appointment" method="POST">
    <input type="hidden" name="doctorId" value="<%= doctor.id %>">
    <input type="hidden" name="clinicId" value="<%= clinic.id %>">
    <input type="hidden" name="receptionistId" value="<%= receptionist.id %>">

    <div class="form-group">
        <label for="patientName">Patient Name</label>
        <input type="text" id="patientName" name="patientName" required>
    </div>

    <div class="form-group">
        <label for="patientAge">Patient Age</label>
        <input type="number" id="patientAge" name="patientAge" min="0" required>
    </div>

    <button type="submit" class="btn">Add Walk-in Patient</button>
</form>

<%- include('partials/footer.ejs') %>
